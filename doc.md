<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# f3c

```go
import "github.com/zerogvt/f3c"
```

Package f3c is a client library for Form3 API\.

Design rationale: We let the json request and responses as per https://api-docs.form3.tech/api.html#organisation-accounts-create dictate the domain data types\.

## Index

- [type Account](<#type-account>)
  - [func NewAccount(uid string, orgid string, attr Attributes) Account](<#func-newaccount>)
- [type AccountEvents](<#type-accountevents>)
- [type AccountSvc](<#type-accountsvc>)
- [type AccountXL](<#type-accountxl>)
- [type Actors](<#type-actors>)
- [type Attributes](<#type-attributes>)
- [type MasterAccount](<#type-masteraccount>)
- [type OrganisationIdentification](<#type-organisationidentification>)
- [type PayloadIn](<#type-payloadin>)
- [type PayloadInArr](<#type-payloadinarr>)
- [type PayloadOut](<#type-payloadout>)
- [type PrivateIdentification](<#type-privateidentification>)
- [type Rel](<#type-rel>)
- [type Relationships](<#type-relationships>)


## type Account

Account models a user account\.

```go
type Account struct {
    Type           string     `json:"type"`
    ID             string     `json:"id"`
    OrganisationID string     `json:"organisation_id"`
    Attributes     Attributes `json:"attributes"`
}
```

### func NewAccount

```go
func NewAccount(uid string, orgid string, attr Attributes) Account
```

NewAccount creates an account that can be used as input to CRUD operations\.

## type AccountEvents

AccountEvents models events happened on this account\.

```go
type AccountEvents struct {
    Evts []Rel `json:"data"`
}
```

## type AccountSvc

AccountSvc encompasses account\-related actions\. As per specs in https://github.com/form3tech-oss/interview-accountapi we need to implement Create\, Fetch\, List and Delete\.

```go
type AccountSvc interface {
    Create(ac Account) (AccountXL, error)
    Fetch(id string) (AccountXL, error)
    List(page int, pagesize int) ([]AccountXL, error)
    Delete(id string) error
}
```

## type AccountXL

AccountXL is a user account with added metadata\. It is returned from remote server and it is not meant to be created by client\.

```go
type AccountXL struct {
    Account
    Version       int           `json:"version"`
    Relationships Relationships `json:"relationships"`
}
```

## type Actors

Actors models actors\. \(Fixme: no idea what this is in the real world\)\.

```go
type Actors struct {
    Name      []string `json:"name"`
    BirthDate string   `json:"birth_date"`
    Residency string   `json:"residency"`
}
```

## type Attributes

Attributes model user account attributes\.

```go
type Attributes struct {
    Country                    string                     `json:"country"`
    BaseCurrency               string                     `json:"base_currency"`
    AccountNumber              string                     `json:"account_number"`
    BankID                     string                     `json:"bank_id"`
    BankIDCode                 string                     `json:"bank_id_code"`
    Bic                        string                     `json:"bic"`
    Iban                       string                     `json:"iban"`
    Name                       []string                   `json:"name"`
    AlternativeNames           []string                   `json:"alternative_names"`
    AccountClassification      string                     `json:"account_classification"`
    JointAccount               bool                       `json:"joint_account"`
    AccountMatchingOptOut      bool                       `json:"account_matching_opt_out"`
    SecondaryIdentification    string                     `json:"secondary_identification"`
    Switched                   bool                       `json:"switched"`
    PrivateIdentification      PrivateIdentification      `json:"private_identification"`
    OrganisationIdentification OrganisationIdentification `json:"organisation_identification"`
    Status                     string                     `json:"status"`
}
```

## type MasterAccount

MasterAccount models relationships to master account\.

```go
type MasterAccount struct {
    Rels []Rel `json:"data"`
}
```

## type OrganisationIdentification

OrganisationIdentification models org id data\.

```go
type OrganisationIdentification struct {
    Identification string   `json:"identification"`
    Actors         []Actors `json:"actors"`
    Address        []string `json:"address"`
    City           string   `json:"city"`
    Country        string   `json:"country"`
}
```

## type PayloadIn

PayloadIn is a helper struct to model the json data that client receives\.

```go
type PayloadIn struct {
    Account AccountXL `json:"data"`
}
```

## type PayloadInArr

PayloadInArr is the array equivalent for PayloadIn\.

```go
type PayloadInArr struct {
    Accounts []AccountXL `json:"data"`
}
```

## type PayloadOut

PayloadOut is a helper struct to model the json data that client sends\.

```go
type PayloadOut struct {
    Account Account `json:"data"`
}
```

## type PrivateIdentification

PrivateIdentification models user personal identification data\.

```go
type PrivateIdentification struct {
    BirthDate      string   `json:"birth_date"`
    BirthCountry   string   `json:"birth_country"`
    Identification string   `json:"identification"`
    Address        []string `json:"address"`
    City           string   `json:"city"`
    Country        string   `json:"country"`
}
```

## type Rel

Rel models a relationship\.

```go
type Rel struct {
    Type string `json:"type"`
    ID   string `json:"id"`
}
```

## type Relationships

Relationships models relationships of this account\.

```go
type Relationships struct {
    MasterAccount MasterAccount `json:"master_account"`
    AccountEvents AccountEvents `json:"account_events"`
}
```

# http

```go
import "github.com/zerogvt/f3c/http"
```

Package http is implementing f3c\.AccountSvc interface over HTTP communication protocol\.

Atm this is the only protocol supported by target API\. But having this implementation separately lays the basis of implementing the interface over other protocols as well \(e\.g\. graphQL\, protobuffs\, etc\) while keeping the same interface\.

## Index

- [func FromPayload(r *http.Response) (f3c.AccountXL, error)](<#func-frompayload>)
- [func FromPayloadArr(r *http.Response) ([]f3c.AccountXL, error)](<#func-frompayloadarr>)
- [func Pprint(data interface{})](<#func-pprint>)
- [func ToPayload(act f3c.Account) *bytes.Buffer](<#func-topayload>)
- [type AccountSvc](<#type-accountsvc>)
  - [func (svc *AccountSvc) Create(act f3c.Account) (f3c.AccountXL, error)](<#func-accountsvc-create>)
  - [func (svc *AccountSvc) Delete(id string, version int) error](<#func-accountsvc-delete>)
  - [func (svc *AccountSvc) Fetch(id string) (f3c.AccountXL, error)](<#func-accountsvc-fetch>)
  - [func (svc *AccountSvc) List(page int, pagesize int) ([]f3c.AccountXL, error)](<#func-accountsvc-list>)
- [type Err](<#type-err>)
  - [func (e Err) Error() string](<#func-err-error>)


## func FromPayload

```go
func FromPayload(r *http.Response) (f3c.AccountXL, error)
```

FromPayload unmarshals a response body into an AccountXL

## func FromPayloadArr

```go
func FromPayloadArr(r *http.Response) ([]f3c.AccountXL, error)
```

FromPayloadArr is similar to FromPayload but works on an array of AccountXL

## func Pprint

```go
func Pprint(data interface{})
```

Pprint pretty prints a struct

## func ToPayload

```go
func ToPayload(act f3c.Account) *bytes.Buffer
```

ToPayload creates a reader out of an account that can be used as body in a POST or GET\.

## type AccountSvc

AccountSvc is an implementation of f3client\.AccountSvc when the underlying transport is http\.

```go
type AccountSvc struct {
    // Allow users to set their own clients if they want to.
    // why? https://youtu.be/cmkKxNN7cs4?t=1509
    // Also allows for easier unit tests if we decide to implement them
    // without the simulated backend.
    // The default zero value is fine as well.
    Cli http.Client
    // base must be set to the base url of the REST server
    Base string
}
```

### func \(\*AccountSvc\) Create

```go
func (svc *AccountSvc) Create(act f3c.Account) (f3c.AccountXL, error)
```

Create creates an account using the REST HTTP API

### func \(\*AccountSvc\) Delete

```go
func (svc *AccountSvc) Delete(id string, version int) error
```

Delete deletes an account based on account id and version\.

### func \(\*AccountSvc\) Fetch

```go
func (svc *AccountSvc) Fetch(id string) (f3c.AccountXL, error)
```

Fetch gets an account id and fetches the account data\.

### func \(\*AccountSvc\) List

```go
func (svc *AccountSvc) List(page int, pagesize int) ([]f3c.AccountXL, error)
```

List gets a list of all accounts\. It supports paging\.

## type Err

Err represents an HTTP client or server error \(i\.e\. status code \>= 400\)

```go
type Err struct {
    Code int
    Text string
}
```

### func \(Err\) Error

```go
func (e Err) Error() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
